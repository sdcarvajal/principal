steps:
  # 1. Instalar dependencias (opcional, según tu entorno)
  - name: 'gcr.io/cloud-builders/npm'
    entrypoint: 'npm'
    args: ['install']
    dir: 'src'  # Cambia 'src' al directorio donde se encuentra tu aplicación

  # 2. Ejecutar pruebas (opcional, si tu proyecto tiene pruebas configuradas)
  - name: 'gcr.io/cloud-builders/npm'
    entrypoint: 'npm'
    args: ['test']
    dir: 'src'

  # 3. Empaquetar la aplicación (si es necesario)
  - name: 'gcr.io/cloud-builders/npm'
    entrypoint: 'npm'
    args: ['run', 'build']
    dir: 'src'

  # 4. Desplegar la aplicación en Google App Engine
  - name: 'gcr.io/cloud-builders/gcloud'
    entrypoint: 'gcloud'
    args: ['app', 'deploy', '--quiet']
    dir: 'src'

# Configuración de imágenes (opcional)
images:
  - 'gcr.io/$PROJECT_ID/my-app'  # Sustituye 'my-app' por el nombre de tu aplicación

# Opcional: Substituciones de variables
substitutions:
  _REGION: 'us-central'
